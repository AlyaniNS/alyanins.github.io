---
const { categories, active } = Astro.props;
---
<div class="flex flex-wrap gap-3 justify-center">
  <button 
    data-category="All" 
    class={`px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 ${active === 'All' ? 'bg-brand-600 text-white dark:bg-brand-500 dark:text-white' : 'bg-navy-100 text-navy-700 hover:bg-brand-100 hover:text-brand-600 dark:bg-navy-800 dark:text-navy-300 dark:hover:bg-brand-800 dark:hover:text-brand-300'}`}
  >
    All
  </button>
  {categories.map((c: string) => (
    <button 
      data-category={c} 
      class={`px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 ${active === c ? 'bg-brand-600 text-white dark:bg-brand-500 dark:text-white' : 'bg-navy-100 text-navy-700 hover:bg-brand-100 hover:text-brand-600 dark:bg-navy-800 dark:text-navy-300 dark:hover:bg-brand-800 dark:hover:text-brand-300'}`}
    >
      {c}
    </button>
  ))}
</div>

<script>
  // Client-side filtering for instant results
  const filterButtons = document.querySelectorAll('[data-category]');
  const projectCards = document.querySelectorAll('[data-project-category]');

  filterButtons.forEach(button => {
    button.addEventListener('click', () => {
      const selectedCategory = button.getAttribute('data-category');
      
      // Update active state
      filterButtons.forEach(btn => {
        btn.classList.remove('bg-brand-600', 'text-white', 'dark:bg-brand-500', 'dark:text-white');
        btn.classList.add('bg-navy-100', 'text-navy-700', 'hover:bg-brand-100', 'hover:text-brand-600', 'dark:bg-navy-800', 'dark:text-navy-300', 'dark:hover:bg-brand-800', 'dark:hover:text-brand-300');
      });
      button.classList.remove('bg-navy-100', 'text-navy-700', 'hover:bg-brand-100', 'hover:text-brand-600', 'dark:bg-navy-800', 'dark:text-navy-300', 'dark:hover:bg-brand-800', 'dark:hover:text-brand-300');
      button.classList.add('bg-brand-600', 'text-white', 'dark:bg-brand-500', 'dark:text-white');
      
      // Filter projects
      projectCards.forEach(card => {
        const cardCategory = card.getAttribute('data-project-category');
        if (selectedCategory === 'All' || cardCategory === selectedCategory) {
          (card as HTMLElement).style.display = 'block';
        } else {
          (card as HTMLElement).style.display = 'none';
        }
      });
    });
  });
</script>
